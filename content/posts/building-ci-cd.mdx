---
title: "Building CI CD"
summary: "When a curious goat hijacks a drone during a routine content collection trip, the ContentCrafter Inc. team turns the quirky mishap into a hilarious and captivating travelogue. Follow the Collectors' adventurous chase, the Validators' meticulous review, and the Transformers' creative magic in this lighthearted tale of unexpected content creation."
date: 2024-09-25
author: "Triston Armstrong"
---

<h1 style={`view-transition-name: link-h-building-ci-cd`} className="text-2xl font-bold">Building Zlorb: A Lightweight CI Daemon in Rust</h1>

<div className="flex gap-2">
  <div style={"view-transition-name: avatar; background-image: url(/assets/avatar.jpg)"} className="w-10 h-10 rounded-full bg-center bg-cover"></div>
  <div className="mb-4">
    Triston Armstrong
    <p className="text-gray-400 text-sm">2024-09-25 - 10 year read</p>
  </div>
</div>

Hey folks, I recently wrapped up a fun side project called **zlorbrs**â€”a simple, systemd-managed continuous integration tool designed for Git-based projects. Inspired by the need for a no-fuss way to monitor repos and auto-trigger builds, it focuses on efficiency without the bloat of enterprise CI systems. Here's a quick recap of what I accomplished, key architectural choices, and the tradeoffs involved.

### What We Accomplished
In just a few hours, I built a fully functional daemon that
- Monitors multiple Git repositories for changes using the [`git2`](https://docs.rs/git2/latest/git2/) crate .
- Performs safe fast-forward merges and triggers Bun builds when updates are detected or artifacts (like the `dist/` folder) are missing.
- Includes a CLI (`zlorbrs-ctl`) for adding, listing, and removing repos without restarting the service.
- Integrates seamlessly with systemd for reliable, auto-restarting operation.

The end result? A tool that keeps your projects built and up-to-date with minimal overhead â€” _perfect for personal or small-team workflows._

### Architectural Decisions

I chose Rust for its memory safety and performance, structuring the project as a Cargo workspace with three crates: `zlorbrs-service` (_the core daemon with an infinite monitoring loop_), `zlorbrs-ctl` (`Clap-powered CLI`), and `zlorbrs-lib` (_shared utils for config handling_). Configs are stored as JSON files in `~/.config/zlorbrs/`, making setup intuitive and avoiding databases. Deployment uses a `justfile` for building/installing binaries and systemd units, ensuring easy Linux integration. Polling (_with configurable sleep intervals_) was picked over webhooks for simplicityâ€”no need for external servers or auth setups.

_Thats the answer the nerds will likely want to hear. In reality, i just like rust and like how easy it is to build and deploy with it_

### TradeOffs
Going lightweight meant sacrificing advanced features like complex pipelines or parallel builds, which keeps it fast but limits scalability for large teams. Polling is reliable and easy to implement but less efficient than event-driven systems, potentially wasting CPU on idle checks. Tying builds to Bun targets JS/TS devs but excludes other ecosystemsâ€” _a deliberate choice for focus over generality_.


Overall, it's a win for quick setups, though it might need extensions for production heavylifting.

Excited to iterate on thisâ€”feedback welcome! Check out the repo for more details. ðŸš€


